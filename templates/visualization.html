{% extends "base.html" %}
{% block content %}
<div class="container mx-auto p-4">
    <h1 class="text-2xl mb-4">Review Analysis</h1>
    
    <!-- Sentiment Distribution -->
    <div class="bg-white p-4 rounded shadow mb-4">
        <h2 class="text-xl mb-2">Sentiment Distribution</h2>
        <div id="sentimentPlot"></div>
    </div>
</div>

<!-- Include Plotly -->
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

<script>
fetch('/api/sentiment/stats')
    .then(response => response.json())
    .then(data => {
        const trace = {
            x: Array.from({length: 10}, (_, i) => -1 + (i * 0.2)),
            y: data.distribution,
            type: 'bar',
            name: 'Sentiment'
        };

        const layout = {
            title: 'Review Sentiment Distribution',
            xaxis: {title: 'Polarity'},
            yaxis: {title: 'Count'}
        };

        Plotly.newPlot('sentimentPlot', [trace], layout);
    });
</script>
{% endblock %}